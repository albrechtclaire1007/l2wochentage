<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>L2 – Wochentage sortieren</title>

  <style>
    @font-face{
      font-family:"DRHand";
      src:url("https://github.com/albrechtclaire1007/l2wochentage/raw/refs/heads/main/DRHand-Regular.otf") format("opentype");
      font-weight:400;
      font-style:normal;
      font-display:swap;
    }

    :root{
      --ink:#101114;
      --card:rgba(255,255,255,.92);
      --line:rgba(20,20,30,.14);
      --shadow:0 10px 26px rgba(0,0,0,.14);

      --pink:#ff5aa5;
      --purple:#7b61ff;
      --blue:#3aa0ff;
      --teal:#18c7a5;
      --lime:#9be15d;
      --yellow:#ffd54a;
      --orange:#ff8a3d;
      --red:#ff4b4b;

      --radius:22px;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      color:var(--ink);
      font-family:"DRHand", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background-image:url("https://i.postimg.cc/B6wMSmcG/Screenshot-2026-01-18-at-16-47-07.png");
      background-size:cover;
      background-position:center;
      background-attachment:fixed;
      min-height:100vh;
    }

    .wrap{
      max-width:980px;
      margin:0 auto;
      padding:18px 14px 26px;
    }

    .header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:12px;
    }

    .title{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:999px;
      padding:10px 16px;
      box-shadow:var(--shadow);
      display:inline-flex;
      align-items:center;
      gap:10px;
    }

    .title h1{
      margin:0;
      font-size:20px;
      line-height:1;
      letter-spacing:.2px;
    }

    .actions{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }

    .btn{
      border:0;
      cursor:pointer;
      border-radius:999px;
      padding:10px 16px;
      font-weight:700;
      font-size:16px;
      color:#fff;
      box-shadow:0 10px 22px rgba(0,0,0,.15);
      transition:transform .05s ease, filter .12s ease;
      font-family:"DRHand", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .btn:active{ transform:scale(.99); }
    .btn.secondary{
      background:rgba(255,255,255,.9);
      color:var(--ink);
      border:1px solid var(--line);
      box-shadow:var(--shadow);
    }
    .btn.secondary:hover{ filter:brightness(.98); }

    .btn.primary{
      background:linear-gradient(135deg, var(--teal), var(--blue));
    }
    .btn.primary:hover{ filter:brightness(1.03); }

    .board{
      display:grid;
      grid-template-columns: 1fr 1.25fr;
      gap:14px;
    }
    @media (max-width: 860px){
      .board{ grid-template-columns:1fr; }
    }

    .panel{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:14px;
      backdrop-filter: blur(6px);
    }

    .panel h2{
      margin:0 0 10px 0;
      font-size:18px;
      line-height:1.05;
    }

    .audioGrid{
      display:grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap:12px;
    }
    @media (max-width: 420px){
      .audioGrid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }

    .audioBtn{
      border:0;
      cursor:pointer;
      border-radius:20px;
      padding:14px 10px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      font-family:"DRHand", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      box-shadow:0 10px 18px rgba(0,0,0,.12);
      transition:transform .05s ease, filter .12s ease, outline-color .12s ease, opacity .12s ease;
      color:#111;
      outline:4px solid transparent;
      user-select:none;
      min-height:62px;
    }
    .audioBtn:active{ transform:scale(.99); }
    .audioBtn.selected{ outline-color: rgba(255,255,255,.9); }
    .audioBtn.done{
      opacity:.45;
      cursor:default;
      filter:grayscale(.25);
    }

    .badge{
      width:34px; height:34px;
      border-radius:12px;
      background:rgba(255,255,255,.92);
      display:grid;
      place-items:center;
      font-weight:900;
      box-shadow:0 6px 14px rgba(0,0,0,.12);
    }

    .speaker{
      width:28px; height:28px;
      flex:0 0 auto;
      filter: drop-shadow(0 2px 2px rgba(0,0,0,.10));
    }

    .slots{
      display:grid;
      gap:12px;
    }

    .slot{
      border-radius:18px;
      border:3px dashed rgba(255,255,255,.85);
      background:rgba(255,255,255,.30);
      min-height:58px;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      user-select:none;
      box-shadow:0 10px 18px rgba(0,0,0,.10);
      transition:transform .05s ease, background .12s ease, border-color .12s ease, filter .12s ease;
      position:relative;
      overflow:hidden;
    }

    .slot:hover{
      filter:brightness(1.03);
    }
    .slot:active{ transform:scale(.995); }

    .slot.locked{
      border-style:solid;
      background:rgba(255,255,255,.92);
      cursor:default;
    }

    .slot.wrong{
      border-color: rgba(255,75,75,.95);
      background:rgba(255,75,75,.18);
      animation:shake .18s linear 1;
    }
    @keyframes shake{
      0%{ transform:translateX(0); }
      25%{ transform:translateX(-6px); }
      50%{ transform:translateX(6px); }
      75%{ transform:translateX(-4px); }
      100%{ transform:translateX(0); }
    }

    .word{
      font-size:20px;
      font-weight:800;
      letter-spacing:.2px;
    }

    .sr-only{
      position:absolute;
      width:1px;height:1px;
      padding:0;margin:-1px;
      overflow:hidden;
      clip:rect(0,0,0,0);
      white-space:nowrap;border:0;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="header">
      <div class="title">
        <h1>Wochentage sortieren</h1>
      </div>

      <div class="actions">
        <button class="btn secondary" id="resetBtn" type="button">Neu starten</button>
        <button class="btn primary" id="checkBtn" type="button">Prüfen</button>
      </div>
    </div>

    <div class="board">
      <section class="panel" aria-label="Audios">
        <h2>Hören</h2>
        <div class="audioGrid" id="audioGrid"></div>
      </section>

      <section class="panel" aria-label="Plätze">
        <h2>Reihenfolge</h2>
        <div class="slots" id="slots"></div>
      </section>
    </div>

    <audio id="player" preload="auto"></audio>
  </div>

  <script>
    const RAW = "https://raw.githubusercontent.com/albrechtclaire1007/l2wochentage/main";

    const days = [
      { id:"montag",     word:"Montag",     audio:`${RAW}/montag.mp3`,     color:"linear-gradient(135deg, var(--yellow), var(--orange))" },
      { id:"dienstag",   word:"Dienstag",   audio:`${RAW}/dienstag.mp3`,   color:"linear-gradient(135deg, var(--pink), var(--purple))" },
      { id:"mittwoch",   word:"Mittwoch",   audio:`${RAW}/mittwoch.mp3`,   color:"linear-gradient(135deg, var(--blue), var(--teal))" },
      { id:"donnerstag", word:"Donnerstag", audio:`${RAW}/donnerstag.mp3`, color:"linear-gradient(135deg, var(--purple), var(--blue))" },
      { id:"freitag",    word:"Freitag",    audio:`${RAW}/freitag.mp3`,    color:"linear-gradient(135deg, var(--teal), var(--lime))" },
      { id:"samstag",    word:"Samstag",    audio:`${RAW}/samstag.mp3`,    color:"linear-gradient(135deg, var(--orange), var(--pink))" },
      { id:"sonntag",    word:"Sonntag",    audio:`${RAW}/sonntag.mp3`,    color:"linear-gradient(135deg, var(--lime), var(--yellow))" },
    ];

    const correctIdsBySlot = days.map(d => d.id);

    const audioGrid = document.getElementById("audioGrid");
    const slotsEl = document.getElementById("slots");
    const player = document.getElementById("player");

    let audioOrder = [];
    let selectedId = null;
    const lockedSlots = Array(7).fill(false);
    const placedCorrect = new Set();

    function shuffle(arr){
      const a = [...arr];
      for(let i=a.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [a[i],a[j]] = [a[j],a[i]];
      }
      return a;
    }

    function byId(id){ return days.find(d => d.id === id); }

    function play(id){
      const d = byId(id);
      if(!d) return;
      player.pause();
      player.currentTime = 0;
      player.src = d.audio;
      player.play().catch(()=>{});
    }

    function renderAudios(){
      audioGrid.innerHTML = "";
      audioOrder.forEach((id, idx) => {
        const d = byId(id);
        const done = placedCorrect.has(id);
        const selected = selectedId === id;

        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "audioBtn" + (selected ? " selected" : "") + (done ? " done" : "");
        btn.style.background = d.color;
        btn.setAttribute("aria-label", "Audio abspielen");
        btn.disabled = false;

        btn.innerHTML = `
          <span class="badge">${idx+1}</span>
          <svg class="speaker" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M11 5L6 9H3v6h3l5 4V5z" stroke="white" stroke-width="2.2" stroke-linejoin="round"/>
            <path d="M15.5 8.5a4 4 0 010 7" stroke="white" stroke-width="2.2" stroke-linecap="round"/>
            <path d="M17.8 6.2a7 7 0 010 11.6" stroke="white" stroke-width="2.2" stroke-linecap="round"/>
          </svg>
          <span class="sr-only">${d.word}</span>
        `;

        btn.addEventListener("click", () => {
          play(id);
          if(done) return;
          selectedId = (selectedId === id) ? null : id;
          renderAudios();
        });

        audioGrid.appendChild(btn);
      });
    }

    function renderSlots(){
      slotsEl.innerHTML = "";
      for(let i=0;i<7;i++){
        const slot = document.createElement("div");
        slot.className = "slot" + (lockedSlots[i] ? " locked" : "");
        slot.setAttribute("role","button");
        slot.tabIndex = 0;

        const correctId = correctIdsBySlot[i];
        const correctWord = byId(correctId).word;

        const wordDiv = document.createElement("div");
        wordDiv.className = "word";
        wordDiv.textContent = lockedSlots[i] ? correctWord : "";
        slot.appendChild(wordDiv);

        slot.addEventListener("click", () => onSlotClick(i, slot));
        slot.addEventListener("keydown", (e) => {
          if(e.key === "Enter" || e.key === " "){
            e.preventDefault();
            onSlotClick(i, slot);
          }
        });

        slotsEl.appendChild(slot);
      }
    }

    function flashWrong(slotEl){
      slotEl.classList.remove("wrong");
      void slotEl.offsetWidth;
      slotEl.classList.add("wrong");
      setTimeout(()=>slotEl.classList.remove("wrong"), 220);
    }

    function onSlotClick(i, slotEl){
      if(lockedSlots[i]) return;
      if(!selectedId) return;

      const needed = correctIdsBySlot[i];
      if(selectedId === needed){
        lockedSlots[i] = true;
        placedCorrect.add(selectedId);
        selectedId = null;
        renderSlots();
        renderAudios();
      }else{
        flashWrong(slotEl);
        selectedId = null;
        renderAudios();
      }
    }

    function resetGame(){
      selectedId = null;
      placedCorrect.clear();
      for(let i=0;i<7;i++) lockedSlots[i] = false;
      audioOrder = shuffle(days.map(d => d.id));
      renderAudios();
      renderSlots();
    }

    function checkGame(){
      const all = lockedSlots.every(Boolean);
      if(all){
        // kleine visuelle Belohnung: einmal alle Audios abspielen (optional) -> hier nur kurzer "glow" über Slots
        [...slotsEl.children].forEach((slot, idx) => {
          slot.style.boxShadow = "0 0 0 6px rgba(24,199,165,.22), 0 10px 18px rgba(0,0,0,.10)";
          setTimeout(()=>{ slot.style.boxShadow = ""; }, 550 + idx*40);
        });
      }else{
        // markiere die ersten zwei noch leeren Slots kurz
        let c = 0;
        for(const slot of slotsEl.children){
          const idx = [...slotsEl.children].indexOf(slot);
          if(!lockedSlots[idx] && c < 2){
            flashWrong(slot);
            c++;
          }
        }
      }
    }

    document.getElementById("resetBtn").addEventListener("click", resetGame);
    document.getElementById("checkBtn").addEventListener("click", checkGame);

    resetGame();
  </script>
</body>
</html>

